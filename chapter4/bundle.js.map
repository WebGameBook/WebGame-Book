{"version":3,"sources":["webpack:///webpack/bootstrap cd973cff535414526904?9858","webpack:///./js/app.js?c99e","webpack:///./js/tetris.js?c0b0","webpack:///./js/animation.js?57f3","webpack:///./js/image_loader.js?72d8","webpack:///./img/red.png?7f91","webpack:///./img/green.png?010f","webpack:///./img/lightblue.png?f250","webpack:///./img/blue.png?54ff","webpack:///./img/pink.png?bee1","webpack:///./img/purple.png?5f23","webpack:///./img/yellow.png?0705","webpack:///./img/left.png?dc2a","webpack:///./img/right.png?878d","webpack:///./img/down.png?d40c","webpack:///./img/rotate.png?da3b","webpack:///./img/animation.png?9e6e"],"names":["game","canvas","document","getElementById","requestAnimationFrame","window","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setTimeout","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","clearTimeout","randomProperty","obj","keys","Object","randomKeyIndex","Math","floor","length","random","randomPropertyName","SHAPE","I","S","Z","O","T","L","J","IMAGE_URL","require","BUTTON_IMG","left","right","down","rotate","Tetris","options","context","getContext","cols","rows","board","block","tickSize","prevTick","Date","now","blockStopsNextTick","blockSize","w","h","buttonSize","requestId","gameStatus","controlButtons","animations","animationImageUrl","loadImages","blockImages","init","images","loader","done","load","resizeCanvas","url","image","Image","src","push","makeNewBlock","addKeyContol","rowsArray","Array","fill","map","loop","bind","addControlButtons","ratio","windowWidth","innerWidth","windowHeight","innerHeight","windowRatio","scaledWidth","scaledHeight","width","height","ceil","isMovable","row","col","alert","addBlockToBoard","dropNewBlock","removeCompleteRow","moveBlock","animation","update","render","shape","position","color","offset","newBlockPosition","isOutOfBoundary","blockIsWithinBoundary","isOverlap","removeRow","rowIndex","splice","every","value","x","y","frameWidth","frameHeight","frames","interval","start","fillStyle","fillRect","entries","rowArray","cell","drawImage","button","body","addEventListener","e","keyCode","preventDefault","rotateBlock","randomShape","randomColor","clockwise","oldCols","oldRows","oldShape","newShape","tempPosition","buttonSizes","leftButton","Button","img","downButton","rotateButton","rightButton","onTouchend","props","_callback","imageUrl","undefined","touchX","changedTouches","clientX","touchY","clientY","STATUS","PENDING","RUNNING","STOPPED","Animation","option","size","frameSize","_currentFrame","_image","_lastUpdate","_status","status","_stop","sx","sy","sw","sh","dx","dy","dw","dh","ImageLoader","imageUrls","assets","loading","addImage","console","log","isArray","concat","onload","loaded"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cd973cff535414526904\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cd973cff535414526904","import Tetris from \"./tetris\";\n\nvar game = new Tetris({\n    canvas: document.getElementById(\"tetris-board\")\n});\n\n\n\n// WEBPACK FOOTER //\n// ./js/app.js\n\n\n// WEBPACK FOOTER //\n// ./js/app.js","import Animation from './animation';\nimport ImageLoader from './image_loader';\n\nconst requestAnimationFrame = (function () {\n    return window.requestAnimationFrame       ||\n        window.webkitRequestAnimationFrame ||\n        window.mozRequestAnimationFrame    ||\n        function(callback){\n            return window.setTimeout(callback, 1000 / 60);\n        };\n})();\n\nconst cancelAnimationFrame = (function () {\n    return window.cancelAnimationFrame     ||\n        window.webkitCancelAnimationFrame ||\n        window.mozCancelAnimationFrame    ||\n        clearTimeout;\n})();\n\nconst randomProperty = function (obj) {\n    let keys = Object.keys(obj),\n        randomKeyIndex = Math.floor(keys.length * Math.random());\n    return obj[keys[randomKeyIndex]];\n};\n\nconst randomPropertyName = function (obj) {\n    let keys = Object.keys(obj),\n        randomKeyIndex = Math.floor(keys.length * Math.random());\n    return keys[randomKeyIndex];\n};\n\nconst SHAPE = {\n    I: [[1, 1, 1, 1]],\n    S: [[0, 1, 1], [1, 1, 0]],\n    Z: [[1, 1, 0], [0, 1, 1]],\n    O: [[1, 1], [1, 1]],\n    T: [[1, 1, 1], [0, 1, 0]],\n    L: [[1, 1, 1], [1, 0, 0]],\n    J: [[1, 1, 1], [0, 0, 1]]\n};\n\nconst IMAGE_URL = [\n    require(\"../img/red.png\"),\n    require(\"../img/green.png\"),\n    require(\"../img/lightblue.png\"),\n    require(\"../img/blue.png\"),\n    require(\"../img/pink.png\"),\n    require(\"../img/purple.png\"),\n    require(\"../img/yellow.png\")\n];\n\nconst BUTTON_IMG = {\n    left: require(\"../img/left.png\"),\n    right: require(\"../img/right.png\"),\n    down: require(\"../img/down.png\"),\n    rotate: require(\"../img/rotate.png\"),\n};\n\nexport default class Tetris {\n    constructor(options) {\n        this.canvas = options.canvas;\n        this.context = this.canvas.getContext(\"2d\");\n\n        this.cols = 10; // block 가로\n        this.rows = 20;\n        this.board = [];\n        this.block = null;\n        this.tickSize = 200;\n        this.prevTick = Date.now();\n        this.blockStopsNextTick = false;\n        this.blockSize = {\n            w: 0,\n            h: 0\n        };\n        this.buttonSize = {\n            w: 0,\n            h: 0\n        };\n\n        this.requestId = 0;\n        this.gameStatus = \"\";\n\n        this.controlButtons = [];\n\n        this.animations = [];\n        this.animationImageUrl = require(\"../img/animation.png\");\n        this.loadImages(this.animationImageUrl);\n\n        this.blockImages = [];\n\n        this.init();\n    }\n\n    loadImages(images, callback) {\n        let loader = new ImageLoader(images);\n        loader.done(callback);\n        loader.load();\n    }\n\n    init() {\n        this.resizeCanvas();\n        this.loadImages(IMAGE_URL, () => {\n            for (let url of IMAGE_URL) {\n                let image = new Image();\n                image.src = url;\n                this.blockImages.push(image);\n            }\n\n            // 새 블록을 보드 최상단 중간지점에 생성\n            this.makeNewBlock(0, this.cols/2);\n            this.addKeyContol();\n\n            let rowsArray = Array(this.rows).fill();\n            this.board = rowsArray.map(() => Array(this.cols).fill(0));\n\n            this.requestId = requestAnimationFrame(this.loop.bind(this));\n        });\n\n        this.addControlButtons();\n    }\n\n    resizeCanvas() {\n        let ratio = this.cols / (this.rows + 2),\n            windowWidth = window.innerWidth,\n            windowHeight = window.innerHeight,\n            windowRatio = windowWidth / windowHeight,\n            scaledWidth = 0,\n            scaledHeight = 0;\n\n        if ( ratio < windowRatio ) {\n            // 가로를 똑같이 1로 놓았을 때, 분모인 세로 길이가 window쪽이 더 짧다는 의미이므로\n            // windowHeight을 기준으로 가로의 길이를 계산해서 캔버스를 조정한다.\n            // 가로로 여백이 발생한다.\n            scaledHeight = windowHeight;\n            scaledWidth = windowHeight * ratio;\n        } else {\n            // 가로를 똑같이 1로 놓았을 때, 분자인 가로 길이가 window쪽이 더 짧다는 의미이므로\n            // windowWidth를 기준으로 가로의 길이를 계산해서 캔버스를 조정한다.\n            // 가로로 여백이 발생한다.\n            scaledWidth = windowWidth;\n            scaledHeight = windowWidth / ratio;\n        }\n\n        this.canvas.width = scaledWidth;\n        this.canvas.height = scaledHeight;\n\n        this.blockSize = {\n            w: this.canvas.width / this.cols,\n            h: this.canvas.height / (this.rows + 2)\n        };\n        this.buttonSize = {\n            w: this.blockSize.w * 2.5,\n            h: this.blockSize.h * 2\n        };\n    }\n\n    dropNewBlock() {\n        this.makeNewBlock(0, Math.ceil(this.cols / 2));\n\n        if (!this.isMovable({row: 1, col: 0})) {\n            alert(\"game over\");\n            cancelAnimationFrame(this.requestId);\n            this.gameStatus = \"gameover\";\n        }\n    }\n\n    loop() {\n        let now = Date.now();\n        if (now - this.prevTick > this.tickSize) {\n            if (this.blockStopsNextTick && !this.isMovable({row: 1, col: 0})) {\n                this.addBlockToBoard();\n                this.dropNewBlock();\n                this.removeCompleteRow();\n                this.blockStopsNextTick = false;\n\n            } else if (!this.isMovable({row: 1, col: 0})) {\n                this.blockStopsNextTick = true;\n\n            } else {\n                this.blockStopsNextTick = false;\n                this.moveBlock(1, 0);\n            }\n\n            this.prevTick = now;\n        }\n\n        for (let animation of this.animations) {\n            animation.update();\n        }\n\n        this.render();\n\n        if (this.gameStatus === \"gameover\") {\n            return;\n        }\n        this.requestId = requestAnimationFrame(this.loop.bind(this));\n    };\n\n    addBlockToBoard() {\n        for (let row = 0; row < this.block.rows; row++) {\n            for (let col = 0; col < this.block.cols; col++) {\n                if (this.block.shape[row][col] > 0) {\n                    this.board[this.block.position.row + row][this.block.position.col + col] = this.block.color;\n                }\n            }\n        }\n    }\n\n    isMovable(offset) {\n        let block = this.block,\n            newBlockPosition = {\n                row: block.position.row + offset.row,\n                col: block.position.col + offset.col\n            };\n\n        for (let row = 0; row < block.rows; row++) {\n            for (let col = 0; col < block.cols; col++) {\n                let isOutOfBoundary = !this.blockIsWithinBoundary(offset);\n                let isOverlap = !isOutOfBoundary &&\n                    block.shape[row][col] > 0 &&\n                    this.board[newBlockPosition.row+ row][newBlockPosition.col + col] > 0;\n\n                if (isOutOfBoundary || isOverlap) {\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    removeCompleteRow() {\n        let removeRow = (rowIndex) => {\n                this.board.splice(rowIndex, 1);\n                this.board.splice(0, 0, Array(this.cols).fill(0));\n            },\n            rowIndex = -1,\n            blockSize = this.blockSize;\n\n        for (let row = 0; row < this.rows; row++) {\n            if (this.board[row].every(value => value > 0)) {\n                for (let col = 0; col < this.cols; col++) {\n                    let animation = new Animation({\n                        x: col * blockSize.w * 0.95,\n                        y: row * blockSize.h * 0.95,\n                        width: blockSize.w * 1.5,\n                        height: blockSize.h * 1.5,\n                        frameWidth: 64,\n                        frameHeight: 64,\n                        frames: 10,\n                        image: this.animationImageUrl,\n                        interval: 30\n                    });\n                    this.animations.push(animation);\n                    animation.start();\n\n                    if (col === this.cols-1) {\n                        animation.done(() => {\n                            removeRow(row);\n                            this.animations = [];\n                        });\n                    }\n                    this.board[row] = Array(this.cols).fill(0);\n                }\n            }\n        }\n    }\n\n    render() {\n        let color,\n            blockSize = this.blockSize;\n            // row, col;\n\n        this.context.fillStyle = \"#000\"; //background\n        this.context.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n        // 쌓인 블록을 그림\n        for (let [row, rowArray] of this.board.entries()) {\n            for (let [col, cell] of rowArray.entries()) {\n                if (cell > 0) {\n                    let image = this.blockImages[cell-1];\n                    this.context.drawImage(image, col * blockSize.w, row * blockSize.h, blockSize.w, blockSize.h);\n                }\n            }\n        }\n\n        // 떨어지는 블록을 그림\n        for (let [row, rowArray] of this.block.shape.entries()) {\n            for(let [col, cell] of rowArray.entries()) {\n                if (cell > 0 ) {\n                    let image = this.blockImages[this.block.color-1];\n                    this.context.drawImage(image,\n                            (this.block.position.col + col) * blockSize.w,\n                            (this.block.position.row + row)* blockSize.h,\n                            blockSize.w,\n                            blockSize.h);\n                }\n            }\n        }\n\n        for (let button of this.controlButtons) {\n            button.render();\n        }\n\n        for (let animation of this.animations) {\n            animation.render(this.context);\n        }\n    }\n\n    addKeyContol() {\n        document.body.addEventListener(\"keydown\",  e => {\n            switch(e.keyCode) {\n                case 37: // left\n                    e.preventDefault();\n                    this.moveBlock(0, -1);\n                    break;\n                case 38: // up\n                    e.preventDefault();\n                    this.rotateBlock(false);\n                    break;\n                case 39: // right\n                    e.preventDefault();\n                    this.moveBlock(0, 1);\n                    break;\n                case 40: // down\n                    e.preventDefault();\n                    this.moveBlock(1, 0);\n                    break;\n                default: break;\n            }\n        });\n    }\n\n    makeNewBlock(row, col) {\n        let randomShape = randomProperty(SHAPE),\n            randomColor = Math.floor(Math.random() * IMAGE_URL.length) + 1;\n\n        this.block = {\n            color: randomColor,\n            shape: randomShape,\n            position: {row, col},\n            rows: randomShape.length,\n            cols: randomShape[0].length\n        };\n    }\n\n    moveBlock(row, col) {\n        if (!this.isMovable({row, col})) {\n            return;\n        }\n\n        this.block.position.row += row;\n        this.block.position.col += col;\n    }\n\n    rotateBlock(clockwise) {\n        var oldCols = this.block.cols,\n            oldRows = this.block.rows,\n            oldShape = this.block.shape,\n            // rotate 후에는 원래의 가로 * 세로 사이즈가 서로 뒤바뀌기 때문에.\n            newShape = Array(oldCols).fill().map(() => Array(oldRows));\n\n        for(let row = 0; row < oldCols; row++) {\n            for (let col = 0; col < oldRows; col++) {\n                newShape[row][col] = this.block.shape[oldRows - 1 - col][row];\n            }\n        }\n\n        this.block.shape = newShape;\n        this.block.rows = oldCols;\n        this.block.cols = oldRows;\n\n        if (!this.isMovable({row: 0, col: 0})) {\n            this.block.shape = oldShape;\n            this.block.rows = oldRows;\n            this.block.cols = oldCols;\n        }\n    }\n\n    blockIsWithinBoundary(offset) {\n        var tempPosition = {\n            row: this.block.position.row + offset.row,\n            col: this.block.position.col + offset.col\n        };\n\n        return tempPosition.row >= 0 &&\n            tempPosition.col >= 0 &&\n            tempPosition.row + this.block.rows <= this.rows &&\n            tempPosition.col + this.block.cols <= this.cols;\n    }\n\n    addControlButtons () {\n        let buttonSizes = this.buttonSize,\n            leftButton  = new Button({\n                x: 0,\n                y: this.blockSize.h * 20,\n                width: buttonSizes.w,\n                height: buttonSizes.h,\n                img: BUTTON_IMG.left,\n                canvas: this.canvas\n            }), \n            downButton  = new Button({\n                x: buttonSizes.w,\n                y: this.blockSize.h * 20,\n                width: buttonSizes.w,\n                height: buttonSizes.h,\n                img: BUTTON_IMG.down,\n                canvas: this.canvas\n            }), \n            rotateButton  = new Button({\n                x: buttonSizes.w * 2,\n                y: this.blockSize.h * 20,\n                width: buttonSizes.w,\n                height: buttonSizes.h,\n                img: BUTTON_IMG.rotate,\n                canvas: this.canvas\n            }),\n            rightButton  = new Button({\n                x: buttonSizes.w * 3,\n                y: this.blockSize.h * 20,\n                width: buttonSizes.w,\n                height: buttonSizes.h,\n                img: BUTTON_IMG.right,\n                canvas: this.canvas\n            })\n\n        leftButton.onTouchend(() => {\n            this.moveBlock(0, -1);\n        });\n        rightButton.onTouchend(() => {\n            this.moveBlock(0, 1);\n        });\n        rotateButton.onTouchend(() => {\n            this.rotateBlock();\n        });\n        downButton.onTouchend(() => {\n            this.moveBlock(1, 0);\n        });\n\n        this.controlButtons.push(leftButton);\n        this.controlButtons.push(rightButton);\n        this.controlButtons.push(rotateButton);\n        this.controlButtons.push(downButton);\n    }\n}\n\nclass Button {\n    constructor (props) {\n        this._callback = () => {};\n        this.x = props.x || 0;\n        this.y = props.y || 0;\n        this.width = props.width || 0;\n        this.height = props.height || 0;\n        this.imageUrl = props.img || \"\";\n        this.canvas = props.canvas;\n        this.context = this.canvas.getContext(\"2d\");\n        this.image = undefined;\n\n        this.init();\n    }\n\n    init () {\n        this.canvas.addEventListener( \"touchend\", ( e ) => {\n            const touchX = e.changedTouches[0].clientX,\n                touchY = e.changedTouches[0].clientY; \n\n            if (touchX > this.x && touchX < this.x + this.width &&\n                touchY > this.y && touchY < this.y + this.height) {\n                this._callback();\n            }\n        });\n        const loader = new ImageLoader(this.imageUrl);        \n        loader.done(() => {\n            this.image = new Image();\n            this.image.src = this.imageUrl;\n        });\n        loader.load();\n    }\n\n    render (context) {\n        if (this.image) {\n            this.context.drawImage(this.image, this.x, this.y, this.width, this.height);\n        }\n    }\n\n    onTouchend ( callback ) {\n        this._callback = callback;\n    }\n\n    off () {\n        this._callback = () => {};\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/tetris.js\n\n\n// WEBPACK FOOTER //\n// ./js/tetris.js","\nconst STATUS = {\n    PENDING: 1,\n    RUNNING: 2,\n    STOPPED: 3\n};\n\nexport default class Animation {\n\n    constructor (option) {\n        this.imageUrl = option.image;\n        this.position = {\n            x: option.x,\n            y: option.y\n        };\n        this.size = {\n            width: option.width,\n            height: option.height\n        };\n        this.frameSize = {\n            width: option.frameWidth,\n            height: option.frameHeight\n        };\n        this.frames = option.frames;\n        this.loop = option.loop || false;\n        this.interval = option.interval || 100;\n\n        this._currentFrame = 0;\n\n        this._image = new Image();\n        this._image.src = this.imageUrl;\n        this._lastUpdate = 0;\n        this._status = STATUS.PENDING;\n\n        this._callback = function () {};\n    }\n\n    update () {\n        if (this.status !== STATUS.RUNNING) {\n            return;\n        }\n\n        let now = new Date();\n        if (now - this._lastUpdate >= this.interval) {\n            this._currentFrame++;\n\n            if (this._currentFrame >= this.frames) {\n                this._currentFrame = this.loop ? 0 : -1;\n            }\n            this._lastUpdate = now;\n        }\n\n        if (this._currentFrame === -1) {\n            this._stop();\n        }\n    }\n\n    _stop () {\n        this.status = STATUS.STOPPED;\n        this._callback();\n    }\n\n    start () {\n        this._lastUpdate = new Date();\n        this.status = STATUS.RUNNING;\n    }\n\n    done (callback) {\n        this._callback = callback;\n    }\n\n    render (context) {\n        if (this.status !== STATUS.RUNNING) {\n            return;\n        }\n\n        let sx = this.frameSize.width * this._currentFrame,\n            sy = 0,\n            sw = this.frameSize.width,\n            sh = this.frameSize.height,\n            dx = this.position.x,\n            dy = this.position.y,\n            dw = this.size.width,\n            dh = this.size.height;\n\n        context.drawImage(this._image, sx, sy, sw, sh, dx, dy, dw, dh);\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./js/animation.js\n\n\n// WEBPACK FOOTER //\n// ./js/animation.js","export default class ImageLoader {\n    constructor(imageUrl) {\n        this.imageUrls = [];\n        this.assets = [];\n        this.loading = false;\n        this.callback = function () {};\n        this.addImage(imageUrl);\n    }\n\n    addImage(imageUrl) {\n        if (this.loading) {\n            console.log(\"loader cannot add more images while it's loading\");\n            return;\n        }\n\n        if (Array.isArray(imageUrl)) {\n            this.imageUrls = this.imageUrls.concat(imageUrl);\n        } else {\n            this.imageUrls.push(imageUrl);\n        }\n    }\n\n    load() {\n        this.assets = this.imageUrls.map((url) => {\n            let image = new Image();\n            image.onload = () => this.onload(image);\n            image.src = url;\n\n            return image;\n        });\n    }\n\n    done(callback) {\n        if (typeof callback === \"function\") {\n            this.callback = callback;\n        }\n    }\n\n    onload(image) {\n        image.loaded = true;\n\n        if (this.assets.every((image) => image.loaded)) {\n            this.callback();\n            this.loading = false;\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./js/image_loader.js\n\n\n// WEBPACK FOOTER //\n// ./js/image_loader.js","module.exports = __webpack_public_path__ + \"red.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/red.png\n// module id = 5\n// module chunks = 1\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/red.png\n// module id = 5\n// module chunks = 1","module.exports = __webpack_public_path__ + \"green.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/green.png\n// module id = 6\n// module chunks = 1\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/green.png\n// module id = 6\n// module chunks = 1","module.exports = __webpack_public_path__ + \"lightblue.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/lightblue.png\n// module id = 7\n// module chunks = 1\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/lightblue.png\n// module id = 7\n// module chunks = 1","module.exports = __webpack_public_path__ + \"blue.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/blue.png\n// module id = 8\n// module chunks = 1\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/blue.png\n// module id = 8\n// module chunks = 1","module.exports = __webpack_public_path__ + \"pink.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/pink.png\n// module id = 9\n// module chunks = 1\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/pink.png\n// module id = 9\n// module chunks = 1","module.exports = __webpack_public_path__ + \"purple.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/purple.png\n// module id = 10\n// module chunks = 1\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/purple.png\n// module id = 10\n// module chunks = 1","module.exports = __webpack_public_path__ + \"yellow.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/yellow.png\n// module id = 11\n// module chunks = 1\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/yellow.png\n// module id = 11\n// module chunks = 1","module.exports = __webpack_public_path__ + \"left.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/left.png\n// module id = 12\n// module chunks = 1\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/left.png\n// module id = 12\n// module chunks = 1","module.exports = __webpack_public_path__ + \"right.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/right.png\n// module id = 13\n// module chunks = 1\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/right.png\n// module id = 13\n// module chunks = 1","module.exports = __webpack_public_path__ + \"down.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/down.png\n// module id = 14\n// module chunks = 1\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/down.png\n// module id = 14\n// module chunks = 1","module.exports = __webpack_public_path__ + \"rotate.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/rotate.png\n// module id = 15\n// module chunks = 1\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/rotate.png\n// module id = 15\n// module chunks = 1","module.exports = __webpack_public_path__ + \"animation.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/animation.png\n// module id = 16\n// module chunks = 1\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./img/animation.png\n// module id = 16\n// module chunks = 1"],"sourceRoot":""}